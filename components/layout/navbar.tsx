"use client";

import * as React from "react";
import { Menu } from "lucide-react";
import { Button } from "@/components/ui/button";
import {
  Sheet,
  SheetContent,
  SheetHeader,
  SheetTitle,
  SheetTrigger,
} from "@/components/ui/sheet";
import { cn } from "@/lib/utils";

const navLinks = [
  { href: "#about", label: "About" },
  { href: "#services", label: "Services" },
  { href: "#work", label: "Work" },
  { href: "#pricing", label: "Pricing" },
  { href: "#contact", label: "Contact" },
] as const;

interface NavLinkProps {
  href: string;
  label: string;
  onClick?: () => void;
  className?: string;
}

function NavLink({ href, label, onClick, className }: NavLinkProps) {
  const handleClick = (e: React.MouseEvent<HTMLAnchorElement>) => {
    e.preventDefault();
    const target = document.querySelector(href);
    if (target) {
      target.scrollIntoView({ behavior: "smooth" });
    }
    onClick?.();
  };

  return (
    <a
      href={href}
      onClick={handleClick}
      className={cn(
        "text-sm font-medium text-muted-foreground transition-colors hover:text-foreground",
        className
      )}
    >
      {label}
    </a>
  );
}

export function Navbar() {
  const [isOpen, setIsOpen] = React.useState(false);
  const [isScrolled, setIsScrolled] = React.useState(false);

  React.useEffect(() => {
    const handleScroll = () => {
      setIsScrolled(window.scrollY > 10);
    };

    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  const handleNavClick = () => {
    setIsOpen(false);
  };

  const handleCtaClick = (e: React.MouseEvent<HTMLAnchorElement>) => {
    e.preventDefault();
    const target = document.querySelector("#contact");
    if (target) {
      target.scrollIntoView({ behavior: "smooth" });
    }
    setIsOpen(false);
  };

  return (
    <header
      className={cn(
        "fixed top-0 left-0 right-0 z-50 transition-all duration-300",
        isScrolled
          ? "bg-background/80 backdrop-blur-md border-b shadow-sm"
          : "bg-transparent"
      )}
    >
      <nav className="mx-auto flex h-16 max-w-6xl items-center justify-between px-4 sm:px-6 lg:px-8">
        {/* Logo */}
        <a href="#" className="flex items-center gap-2">
          <svg width="159" height="30" viewBox="0 0 159 30" fill="none" xmlns="http://www.w3.org/2000/svg" className="h-6 w-auto">
            <path d="M8.28801 25.312C7.96801 26.1227 7.64801 26.8053 7.32801 27.36C7.02934 27.9147 6.68801 28.3627 6.30401 28.704C5.94134 29.0667 5.52534 29.3227 5.05601 29.472C4.60801 29.6427 4.08534 29.728 3.48801 29.728C3.16801 29.728 2.84801 29.7067 2.52801 29.664C2.20801 29.6213 1.89868 29.5467 1.60001 29.44V26.944C1.83468 27.0507 2.10134 27.136 2.40001 27.2C2.72001 27.2853 2.98668 27.328 3.20001 27.328C3.75468 27.328 4.21334 27.1893 4.57601 26.912C4.96001 26.656 5.24801 26.2827 5.44001 25.792L6.56001 23.008L1.09375e-05 6.56H3.07201L7.90401 20.096H7.96801L12.608 6.56H15.488L8.28801 25.312ZM31.488 23.04C31.0187 23.3173 30.368 23.456 29.536 23.456C28.832 23.456 28.2667 23.264 27.84 22.88C27.4347 22.4747 27.232 21.824 27.232 20.928C26.4853 21.824 25.6107 22.4747 24.608 22.88C23.6267 23.264 22.56 23.456 21.408 23.456C20.6613 23.456 19.9467 23.3707 19.264 23.2C18.6027 23.0293 18.0267 22.7627 17.536 22.4C17.0453 22.0373 16.6507 21.568 16.352 20.992C16.0747 20.3947 15.936 19.68 15.936 18.848C15.936 17.9093 16.096 17.1413 16.416 16.544C16.736 15.9467 17.152 15.4667 17.664 15.104C18.1973 14.72 18.7947 14.432 19.456 14.24C20.1387 14.048 20.832 13.888 21.536 13.76C22.2827 13.6107 22.9867 13.504 23.648 13.44C24.3307 13.3547 24.928 13.248 25.44 13.12C25.952 12.9707 26.3573 12.768 26.656 12.512C26.9547 12.2347 27.104 11.84 27.104 11.328C27.104 10.7307 26.9867 10.2507 26.752 9.888C26.5387 9.52534 26.2507 9.248 25.888 9.056C25.5467 8.864 25.152 8.736 24.704 8.672C24.2773 8.608 23.8507 8.576 23.424 8.576C22.272 8.576 21.312 8.8 20.544 9.248C19.776 9.67467 19.36 10.496 19.296 11.712H16.576C16.6187 10.688 16.832 9.824 17.216 9.12C17.6 8.416 18.112 7.85067 18.752 7.424C19.392 6.976 20.1173 6.656 20.928 6.464C21.76 6.272 22.6453 6.176 23.584 6.176C24.3307 6.176 25.0667 6.22934 25.792 6.336C26.5387 6.44267 27.2107 6.66667 27.808 7.008C28.4053 7.328 28.8853 7.78667 29.248 8.384C29.6107 8.98134 29.792 9.76 29.792 10.72V19.232C29.792 19.872 29.824 20.3413 29.888 20.64C29.9733 20.9387 30.2293 21.088 30.656 21.088C30.8907 21.088 31.168 21.0347 31.488 20.928V23.04ZM27.072 14.56C26.7307 14.816 26.2827 15.008 25.728 15.136C25.1733 15.2427 24.5867 15.3387 23.968 15.424C23.3707 15.488 22.7627 15.5733 22.144 15.68C21.5253 15.7653 20.9707 15.9147 20.48 16.128C19.9893 16.3413 19.584 16.6507 19.264 17.056C18.9653 17.44 18.816 17.9733 18.816 18.656C18.816 19.104 18.9013 19.488 19.072 19.808C19.264 20.1067 19.4987 20.352 19.776 20.544C20.0747 20.736 20.416 20.8747 20.8 20.96C21.184 21.0453 21.5893 21.088 22.016 21.088C22.912 21.088 23.68 20.9707 24.32 20.736C24.96 20.48 25.4827 20.1707 25.888 19.808C26.2933 19.424 26.592 19.0187 26.784 18.592C26.976 18.144 27.072 17.728 27.072 17.344V14.56ZM33.0595 6.56H35.6195V9.184H35.6835C36.8142 7.17867 38.6062 6.176 41.0595 6.176C42.1475 6.176 43.0542 6.32534 43.7795 6.624C44.5048 6.92267 45.0915 7.33867 45.5395 7.872C45.9875 8.40534 46.2968 9.04534 46.4675 9.792C46.6595 10.5173 46.7555 11.328 46.7555 12.224V23.104H44.0355V11.904C44.0355 10.88 43.7368 10.0693 43.1395 9.472C42.5422 8.87467 41.7208 8.576 40.6755 8.576C39.8435 8.576 39.1182 8.704 38.4995 8.96C37.9022 9.216 37.4008 9.57867 36.9955 10.048C36.5902 10.5173 36.2808 11.072 36.0675 11.712C35.8755 12.3307 35.7795 13.0133 35.7795 13.76V23.104H33.0595V6.56ZM52.7608 3.584H50.0408V0.256002H52.7608V3.584ZM50.0408 6.56H52.7608V23.104H50.0408V6.56ZM63.4705 23.104H60.5585L54.4145 6.56H57.4545L62.0945 20.352H62.1585L66.6705 6.56H69.5185L63.4705 23.104ZM82.7768 6.56H86.0728V8.96H82.7768V19.232C82.7768 19.552 82.7981 19.808 82.8408 20C82.9048 20.192 83.0114 20.3413 83.1608 20.448C83.3101 20.5547 83.5128 20.6293 83.7688 20.672C84.0461 20.6933 84.3981 20.704 84.8248 20.704H86.0728V23.104H83.9928C83.2888 23.104 82.6808 23.0613 82.1688 22.976C81.6781 22.8693 81.2728 22.688 80.9528 22.432C80.6541 22.176 80.4301 21.8133 80.2808 21.344C80.1314 20.8747 80.0568 20.256 80.0568 19.488V8.96H77.2408V6.56H80.0568V1.6H82.7768V6.56ZM89.7985 17.888C89.8198 18.4853 89.9585 18.9973 90.2145 19.424C90.4705 19.8293 90.8012 20.16 91.2065 20.416C91.6332 20.6507 92.1025 20.8213 92.6145 20.928C93.1478 21.0347 93.6918 21.088 94.2465 21.088C94.6732 21.088 95.1212 21.056 95.5905 20.992C96.0598 20.928 96.4865 20.8107 96.8705 20.64C97.2758 20.4693 97.6065 20.224 97.8625 19.904C98.1185 19.5627 98.2465 19.136 98.2465 18.624C98.2465 17.92 97.9798 17.3867 97.4465 17.024C96.9132 16.6613 96.2412 16.3733 95.4305 16.16C94.6412 15.9253 93.7772 15.7227 92.8385 15.552C91.8998 15.36 91.0252 15.104 90.2145 14.784C89.4252 14.4427 88.7638 13.9733 88.2305 13.376C87.6972 12.7787 87.4305 11.9467 87.4305 10.88C87.4305 10.048 87.6118 9.33334 87.9745 8.736C88.3585 8.13867 88.8385 7.65867 89.4145 7.296C90.0118 6.912 90.6732 6.63467 91.3985 6.464C92.1452 6.272 92.8812 6.176 93.6065 6.176C94.5452 6.176 95.4092 6.26134 96.1985 6.432C96.9878 6.58134 97.6812 6.85867 98.2785 7.264C98.8972 7.648 99.3878 8.18134 99.7505 8.864C100.113 9.52534 100.327 10.3573 100.391 11.36H97.6705C97.6278 10.8267 97.4892 10.3893 97.2545 10.048C97.0198 9.68534 96.7212 9.39734 96.3585 9.184C95.9958 8.97067 95.5905 8.82134 95.1425 8.736C94.7158 8.62934 94.2785 8.576 93.8305 8.576C93.4252 8.576 93.0092 8.608 92.5825 8.672C92.1772 8.736 91.8038 8.85334 91.4625 9.024C91.1212 9.17334 90.8438 9.38667 90.6305 9.664C90.4172 9.92 90.3105 10.2613 90.3105 10.688C90.3105 11.1573 90.4705 11.552 90.7905 11.872C91.1318 12.1707 91.5585 12.4267 92.0705 12.64C92.5825 12.832 93.1585 13.0027 93.7985 13.152C94.4385 13.28 95.0785 13.4187 95.7185 13.568C96.4012 13.7173 97.0625 13.8987 97.7025 14.112C98.3638 14.3253 98.9398 14.6133 99.4305 14.976C99.9425 15.3173 100.348 15.7547 100.647 16.288C100.967 16.8213 101.127 17.4827 101.127 18.272C101.127 19.2747 100.913 20.1067 100.487 20.768C100.081 21.4293 99.5372 21.9627 98.8545 22.368C98.1932 22.7733 97.4358 23.0507 96.5825 23.2C95.7505 23.3707 94.9185 23.456 94.0865 23.456C93.1692 23.456 92.2945 23.36 91.4625 23.168C90.6305 22.976 89.8945 22.6667 89.2545 22.24C88.6145 21.792 88.1025 21.216 87.7185 20.512C87.3345 19.7867 87.1212 18.912 87.0785 17.888H89.7985ZM105.159 14.848C105.159 15.8507 105.287 16.7467 105.543 17.536C105.82 18.304 106.193 18.9547 106.663 19.488C107.132 20 107.676 20.3947 108.295 20.672C108.935 20.9493 109.607 21.088 110.311 21.088C111.015 21.088 111.676 20.9493 112.295 20.672C112.935 20.3947 113.489 20 113.959 19.488C114.428 18.9547 114.791 18.304 115.047 17.536C115.324 16.7467 115.463 15.8507 115.463 14.848C115.463 13.8453 115.324 12.96 115.047 12.192C114.791 11.4027 114.428 10.7413 113.959 10.208C113.489 9.67467 112.935 9.26934 112.295 8.992C111.676 8.71467 111.015 8.576 110.311 8.576C109.607 8.576 108.935 8.71467 108.295 8.992C107.676 9.26934 107.132 9.67467 106.663 10.208C106.193 10.7413 105.82 11.4027 105.543 12.192C105.287 12.96 105.159 13.8453 105.159 14.848ZM102.279 14.848C102.279 13.632 102.449 12.5013 102.791 11.456C103.132 10.3893 103.644 9.472 104.327 8.704C105.009 7.91467 105.852 7.296 106.855 6.848C107.857 6.4 109.009 6.176 110.311 6.176C111.633 6.176 112.785 6.4 113.767 6.848C114.769 7.296 115.612 7.91467 116.295 8.704C116.977 9.472 117.489 10.3893 117.831 11.456C118.172 12.5013 118.343 13.632 118.343 14.848C118.343 16.064 118.172 17.1947 117.831 18.24C117.489 19.2853 116.977 20.2027 116.295 20.992C115.612 21.76 114.769 22.368 113.767 22.816C112.785 23.2427 111.633 23.456 110.311 23.456C109.009 23.456 107.857 23.2427 106.855 22.816C105.852 22.368 105.009 21.76 104.327 20.992C103.644 20.2027 103.132 19.2853 102.791 18.24C102.449 17.1947 102.279 16.064 102.279 14.848ZM120.494 6.56H123.054V10.048H123.118C123.779 8.704 124.59 7.712 125.55 7.072C126.51 6.432 127.726 6.13334 129.198 6.176V9.056C128.11 9.056 127.182 9.20534 126.414 9.504C125.646 9.80267 125.027 10.24 124.558 10.816C124.088 11.392 123.747 12.096 123.534 12.928C123.32 13.7387 123.214 14.6773 123.214 15.744V23.104H120.494V6.56ZM141.211 13.248C141.169 12.608 141.019 12 140.763 11.424C140.529 10.848 140.198 10.3573 139.771 9.952C139.366 9.52534 138.875 9.19467 138.299 8.96C137.745 8.704 137.126 8.576 136.443 8.576C135.739 8.576 135.099 8.704 134.523 8.96C133.969 9.19467 133.489 9.52534 133.083 9.952C132.678 10.3787 132.358 10.88 132.123 11.456C131.889 12.0107 131.75 12.608 131.707 13.248H141.211ZM143.835 17.856C143.473 19.712 142.673 21.1093 141.435 22.048C140.198 22.9867 138.641 23.456 136.763 23.456C135.441 23.456 134.289 23.2427 133.307 22.816C132.347 22.3893 131.537 21.792 130.875 21.024C130.214 20.256 129.713 19.3387 129.371 18.272C129.051 17.2053 128.87 16.0427 128.827 14.784C128.827 13.5253 129.019 12.3733 129.403 11.328C129.787 10.2827 130.321 9.376 131.003 8.608C131.707 7.84 132.529 7.24267 133.467 6.816C134.427 6.38934 135.473 6.176 136.603 6.176C138.075 6.176 139.291 6.48534 140.251 7.104C141.233 7.70134 142.011 8.46934 142.587 9.408C143.185 10.3467 143.59 11.3707 143.803 12.48C144.038 13.5893 144.134 14.6453 144.091 15.648H131.707C131.686 16.3733 131.771 17.0667 131.963 17.728C132.155 18.368 132.465 18.944 132.891 19.456C133.318 19.9467 133.862 20.3413 134.523 20.64C135.185 20.9387 135.963 21.088 136.859 21.088C138.011 21.088 138.95 20.8213 139.675 20.288C140.422 19.7547 140.913 18.944 141.147 17.856H143.835ZM147.071 8.96H144.287V6.56H147.071V4.096C147.071 2.752 147.455 1.73867 148.223 1.056C149.012 0.352002 150.153 1.90735e-06 151.647 1.90735e-06C151.903 1.90735e-06 152.191 0.0213356 152.511 0.064003C152.852 0.106669 153.151 0.170669 153.407 0.256002V2.624C153.172 2.53867 152.916 2.48534 152.639 2.464C152.361 2.42134 152.105 2.4 151.871 2.4C151.209 2.4 150.697 2.528 150.335 2.784C149.972 3.04 149.791 3.53067 149.791 4.256V6.56H152.991V8.96H149.791V23.104H147.071V8.96ZM155.067 19.552H158.619V23.104H155.067V19.552Z" fill="white"/>
          </svg>
        </a>

        {/* Desktop Navigation */}
        <div className="hidden items-center gap-8 md:flex">
          {navLinks.map((link) => (
            <NavLink key={link.href} {...link} />
          ))}
        </div>

        {/* Desktop CTA */}
        <div className="hidden md:block">
          <Button asChild size="sm">
            <a href="#contact" onClick={handleCtaClick}>
              Book a call
            </a>
          </Button>
        </div>

        {/* Mobile Menu */}
        <Sheet open={isOpen} onOpenChange={setIsOpen}>
          <SheetTrigger asChild className="md:hidden">
            <Button variant="ghost" size="icon">
              <Menu className="h-5 w-5" />
              <span className="sr-only">Toggle menu</span>
            </Button>
          </SheetTrigger>
          <SheetContent side="right" className="w-[280px]">
            <SheetHeader>
              <SheetTitle className="text-left">Navigation</SheetTitle>
            </SheetHeader>
            <div className="flex flex-col gap-4 pt-6">
              {navLinks.map((link) => (
                <NavLink
                  key={link.href}
                  {...link}
                  onClick={handleNavClick}
                  className="text-base py-2"
                />
              ))}
              <Button asChild className="mt-4 w-full">
                <a href="#contact" onClick={handleCtaClick}>
                  Book a call
                </a>
              </Button>
            </div>
          </SheetContent>
        </Sheet>
      </nav>
    </header>
  );
}





